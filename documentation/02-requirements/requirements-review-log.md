- FR-KNOW-05 | FR | Двусторонний API для внешних систем | Updated | Добавили REST API с токенами, webhooks и приём обратных комментариев/актуализаций | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-KNOW-04 | FR | Логирование обновлений нормативных данных | Updated | Разделили лог успешных обновлений и incidents.json для ошибок, настроили аудит | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-KNOW-03 | FR | Ручная проверка обновлений нормативной базы | Updated | Добавили ручной запуск проверки локальных ГОСТ, diff-отчёт и связь с миграцией знаний | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-KNOW-02 | FR | Процедура миграции знаний | Updated | Добавили diff, smoke-тест, ручное подтверждение и rollback-пакет перед миграцией | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-KNOW-01 | FR | Переносимый контекст обучения | Updated | Сформировали описание хранения по projectId, API export/import и подписки на обновления | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ACCESS-05 | FR | Ручное управление правами администратора | Updated | Добавили ручное назначение ролей/привилегий с обязательным комментарием и журналом изменений | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ACCESS-04 | FR | Аудит действий Teacher/User | Updated | Добавили полный аудит с 12-месячным хранением и разграничением просмотра по ролям | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ACCESS-03 | FR | Контроль запросов пользователей | Updated | Ограничили запросы User проектным ACL, добавили аудит отказов и уведомление в интерфейсе | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ACCESS-02 | FR | Контроль доступа Teacher к обучению | Updated | Добавили approval администратора и проверку прав на загрузку/запуск обучения по проектам | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ACCESS-01 | FR | Ролевое управление доступом | Updated | Сформулирован базовый набор ролей Teacher/User с точечными привилегиями и аудитом изменений | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ESTIMATE-06 | FR | Привязка Estimate к шифру РД | Updated | Добавили автоматическое наследование projectId/rdCipher и пометку External при расхождениях | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ESTIMATE-05 | FR | Перенос и проверка формул при импорте | Updated | Добавили перенос формул, проверку ссылок и маркировку Broken при конфликте | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ESTIMATE-04 | FR | Round-trip обмен сметными форматами | Updated | Добавили описание полного импорта/экспорта с сохранением формул и предупреждениями для частичных элементов | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ESTIMATE-03 | FR | Валидация итогов и обязательных полей Estimate | Updated | Включили проверку сметы по эталонному шаблону, отчёт с критичностью и сохранение настроек пользователя | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-ESTIMATE-02 | FR | Привязка позиций Estimate к нормам | Updated | Добавили компактное описание полуавтоматического подбора норм и фиксацию коэффициентов с логированием решений | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-FORMULA-01 | FR | Детектирование и проверка формул | Updated | Сжали описание детекта/валидации, задали метрики покрытия ≥95%, время проверки ≤5 сек и требования к артефакту formulas.json | technical-requirements.md; requirements_register.csv; fr-catalog.md; project-history.md
- FR-FORMULA-02 | FR | Отчет о расхождениях расчетов и итогов | Updated | Перевели требование в компактный формат, оставили три ключевые функции и Acceptance с точностью ≥95% и сохранением отчета в formulaValidation.json | technical-requirements.md; requirements_register.csv; fr-catalog.md; project-history.md
- FR-EXCEL-06 | FR | Многолистовые Excel-книги с умными связями | Updated | Укоротили описание, выделили три возможности, зафиксировали SLA 30 сек и требования к валидным связям и артефакту структуры книги | technical-requirements.md; requirements_register.csv; fr-catalog.md; project-history.md
- FR-TABLE-01 | FR | Извлечение табличных спецификаций с ценами | Updated | Сжали описание извлечения таблиц, оставили ключевые поля и метрики полноты ≥95% и заполнения цен ≥90% | technical-requirements.md; requirements_register.csv; fr-catalog.md; project-history.md
 - FR-STAMP-01 | FR | Извлечение полей штампа документа с интеллектуальным обучением и адаптацией к проектной специфике | Updated | Enhanced with intelligent learning and project-specific adaptation: accumulation of stamp templates by document types and projects, adaptive field parsing with project dictionaries, interactive learning for ambiguous cases, integration with learning system (FR-LEARN-01..04, FR-KNOW-01, FR-PROJECT-03), structured data with learning metadata and recommendations | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-STAMP-02 | FR | Сохранение уверенности по полям и происхождения в аудит-логе | Updated | Added per-field confidence scores (0-100%), extraction source tracking (OCR/parsing/manual), audit log (history/author/time/reason/previous values), audit structure (timestamp/fieldName/oldValue/newValue/confidence/source/author/reason/documentId), metadata integration | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-STAMP-03 | FR | Валидация полноты и форматов полей штампа документа | Updated | Added completeness validation (mandatory/recommended/optional fields), format validation (dates/numbers/ciphers), validation criteria, error/warning reporting, correction recommendations | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-02 | FR | Хранение метаданных | Updated | Added metadata structure (basic/language/structural/project/technical data), JSON storage format, indexing for search/filtering, project binding, processing status tracking | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-03 | FR | Логирование шагов обработки и обучения | Updated | Added log types (system/processing/learning/user), log structure (timestamp/level/code/message/documentId/inputPath/outputPath/stage/details), JSON format, log rotation/archiving, full traceability | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-04 | FR | Версионирование результатов обучения и базы знаний | Updated | Added versioning objects (learning results/knowledge base/system config), version structure (versionId/timestamp/description/author/changes/rollbackData), operations (create/compare/rollback/history), change tracking | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-05 | FR | Детекция типа PDF источника и маршрутизация в специализированный пайплайн | Integrated | Integrated from supplements; added PDF type detection (mc_pdf/scan_pdf/mixed_pdf), detection algorithm, pipeline routing (FR-OCR-01A/01B), processing optimization | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-06 | FR | Парсинг штампов DWG и извлечение табличного контента из текстовых слоев/блоков | Integrated | Integrated from supplements; added DWG stamp parsing, table content extraction, text layer analysis, data validation, metadata integration | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-07 | FR | Парсинг смет (ARP/GSFX/XML/XLS) в единую модель Estimate с валидацией итогов/единиц и привязкой к шифру РД | Integrated | Integrated from supplements; added unified Estimate model (sections→items→resources), format support (ARP/GSFX/XML/XLS), validation (totals/units/mandatory fields), RD cipher binding | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-DAT-08 | FR | Сохранение полей штампа заголовка в DocumentMetadata.titleBlock с уверенностью по полям и аудит-логом | Integrated | Integrated from supplements; added titleBlock structure, per-field confidence scores, audit log (history/author/time/reason/previous values), metadata integration, versioning | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-LOG-01 | FR | Единый формат лога обработки | Integrated | Integrated from supplements; added standardized log format (timestamp/level/code/message/documentId/inputPath/outputPath/stage/details), JSON structure, machine analysis support, filtering/search | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-LOG-02 | FR | Сохранение артефактов обработки в предсказуемой структуре каталогов | Integrated | Integrated from supplements; added artifact types (metadata/titleBlock/tables/estimate/logs), directory structure (/artifacts/{projectId}/{documentId}/{timestamp}/{type}/), file naming, versioning, indexing | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-ART-01 | FR | Формирование набора артефактов для демонстраций с ссылками для воспроизводимости | Integrated | Integrated from supplements; added demo artifact sets (source documents/intermediate results/final artifacts/logs/metadata), formats (JSON/XLSX/PDF/TXT), reproducibility links, demo structure | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORMS-02 | FR | Создание базы знаний по нормативам | Updated | Added knowledge base structure (categories/hierarchy/links/versioning), knowledge types (requirements/rules/reference data), grouping algorithm, indexing for search, versioning on updates | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORMS-03 | FR | Валидация данных по нормативным требованиям | Updated | Added validation types (numeric values/procedural rules/reference data), validation algorithm, compliance reports with violations/recommendations/clause references | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORMS-04 | FR | Поиск по нормативной базе | Updated | Added search types (text/category/numeric/date), search criteria, indexing algorithm, semantic search, relevance ranking | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORM-05 | FR | Парсинг метаданных DOCX нормативных документов и выжимки по запросу | Integrated | Integrated from supplements; added DOCX metadata extraction, structure parsing, query-based excerpts, context preservation, source references | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORM-06 | FR | Экспорт выжимок в PDF со ссылками на источник | Integrated | Integrated from supplements; added PDF export with source references, bibliography, structured document format, reproducibility links | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORM-07 | FR | Версионирование и политика актуализации нормативных документов | Integrated | Integrated from supplements; added versioning system, edition tracking, update policy, local sources support, change tracking | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORM-08 | FR | Хранение извлеченных требований как структурированных правил | Integrated | Integrated from supplements; added structured rules with conditions/ranges/clause references, JSON storage format, rule analysis algorithm, rule relationships | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-NORM-09 | FR | Генерация отчетов о несоответствиях с точными ссылками на пункты | Integrated | Integrated from supplements; added non-conformance reports with exact clause references, violation classification (critical/warning/informational), correction recommendations | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-06 | FR | Поддержка многолистовых книг и перекрестных ссылок | Integrated | Integrated from supplements; added multi-sheet workbooks support, cross-sheet references, formulas between sheets, data consolidation, automatic calculations | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-07 | FR | Автозаполнение полей заголовка из контекста проекта | Integrated | Integrated from supplements; added auto-fill header fields (projectName/designStage/rdCipher), project context integration, template compatibility, data synchronization | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-TPL-01 | FR | Реестр шаблонов Excel отчетов | Integrated | Integrated from supplements; added template registry with versioning, owners, approval dates, scope management, access control, version migration | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-TPL-02 | FR | Валидация строгого соответствия активной версии шаблона | Enhanced | Enhanced with intelligent learning and adaptation; added comprehensive validation aspects (sheets/names/styles/print areas/formulas/protection/macros), integration with learning system for error statistics and automatic corrections, template registry integration, contextual validation with project-specific requirements, error handling with criticality levels (Critical/Warning/Info), performance requirements (≤5sec for files up to 10MB), parallel validation support | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-TPL-03 | FR | Валидация типов данных и форматов; принуждение обязательных полей | Integrated | Integrated from supplements; added data type validation (numeric/text/logical/formulas), format validation, mandatory field enforcement, value range validation | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-TPL-04 | FR | Валидация формул и настроек печати с интеллектуальным обучением и адаптацией; комплексный отчет о соответствии | Enhanced | Enhanced with detailed comprehensive requirements; added detailed formula validation (syntax validation, reference validation, cyclic dependency detection, project-specific formulas), comprehensive print settings validation (print areas, scaling, page orientation, margins, headers), advanced learning system integration (formula knowledge accumulation, error learning, project adaptation, interactive learning), extensive integration with related requirements (FR-FORMULA-01..02, FR-EXCEL-TPL-01, FR-LEARN-01..04, FR-KNOW-01, FR-TABLE-01..04, FR-EXCEL-06), comprehensive reporting (structured reports, recommendations, statistics, metadata), performance and scalability requirements (≤3sec for files up to 5MB, ≤10sec up to 20MB, support for multi-sheet workbooks up to 50 sheets, validation up to 100,000 cells, parallel validation, caching, incremental validation), detailed error handling with criticality levels (Critical/Warning/Info), detailed acceptance criteria with measurable conditions | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-06 | FR | Ветвление пайплайна обработки PDF по типам | Integrated | Integrated from supplements; added automatic PDF type detection (machine-readable/scan-image/mixed), pipeline branching, preprocessing for scans (deskew/denoise/binarization), combined approach for mixed PDF, detection time ≤2sec | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-01B | FR | Обработка сканированных PDF документов | Added | Split from FR-OCR-01; added OCR processing with preprocessing (deskew/denoise/binarization), Russian language support, table extraction, confidence scores, processing time ≤30sec/page | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-01C | FR | Обработка изображений (JPG, PNG, TIFF) | Added | Split from FR-OCR-01; added image preprocessing (orientation/contrast/binarization), Russian OCR, table/stamp detection, handwritten text support, processing time ≤20sec/image | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-02 | FR | Обработка низкокачественных сканов, печатей, рукописных элементов | Updated | Added advanced preprocessing for low-quality scans, stamp/seal detection, handwritten text recognition, special cases (watermarks/copies/damage), CER≤15%/WER≤25% | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-03 | FR | Поддержка русского языка в документах | Updated | Added Russian language models, Cyrillic support, dictionaries/correction, technical terminology, Russian formatting standards, CER≤3%/WER≤8% | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-OCR-04 | FR | Структурирование извлеченных данных для базы знаний | Updated | Added JSON structuring, document hierarchy preservation, table conversion, metadata extraction, integration with learning/project systems, processing time ≤10sec | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-PROJECT-06 | FR | Сравнительный анализ проектов | Added | Added comparative analysis of 2+ projects, comparison criteria (metadata/extracted data/normatives), similarity/difference metrics, comparative tables and reports, visualization (charts/graphs), ACL compliance | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-PROJECT-07 | FR | Шаблоны проектов | Added | Added template creation from typical projects, template application to new projects, template library management (categorization/versioning/search/filtering), ACL for templates, integration with project lifecycle | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
# Requirements Review Log

- Date: 2025-10-16
- Reviewer: Client & BA
- Scope: Iterative review of requirements_register.xlsx (BR/FR/UC only; PT excluded)

## Entries

Format: ID | Category | Name | Decision | Notes | Affected Files

- BR-001 | BR | Создание интеллектуальной системы обучения | Cross-linked | Added references to SRS §2.4/§4.4.1 and clarified offline/OpenAI-like constraint in BRD §4 | business-requirements.md; requirements_register.jsonl
- BR-002 | BR | Обработка текстовых запросов пользователей | Updated | Added Excel/JSON/CSV outputs, query types (facts/tables/aggregates), auto vocabulary of project entities/synonyms, traceability; moved response time to SRS NFR‑PERF‑01 | business-requirements.md; requirements_register.jsonl
- BR-003 | BR | Проектно-ориентированная работа с данными | Updated | Added project attributes (projectId, projectName, designStage, rdCipher), project typing, analog search criteria (type/stage/materials), export formats (Excel/JSON/CSV), cross-project access rule (ACL), and traceability | business-requirements.md; requirements_register.jsonl
- BR-004 | BR | Создание технического задания | ПЕРЕКЛАССИФИЦИРОВАНО | Переклассифицировано в PT-002 (проектная задача), так как это процессная задача, а не требование к продукту | business-requirements.md; work-plan.md
 - BR-005 | BR | Извлечение данных из документов (OCR) | Updated | Added supported formats list, noted machine‑readable vs scanned sources, defined recognition quality criteria, added traceability to UC/FR | business-requirements.md; requirements_register.jsonl
 - BR-006 | BR | Формирование отчетов в Excel | Updated | Added multi‑sheet workbooks, table and pivot reports, kept “operational generation”, strengthened acceptance criteria (structure, data types validation, template conformance), added traceability | business-requirements.md; requirements_register.jsonl
 - BR-007 | BR | Работа с нормативной базой (ГОСТы) | Updated | Added sources/formats (ГОСТ/СП/СНиП/ТУ/РД; PDF/DOCX/HTML), versioning/actualization policy, storing extracted requirements as structured rules with links, non‑conformance report with clause references, and traceability | business-requirements.md; requirements_register.jsonl
- BR-008 | BR | Архитектурное проектирование | ПЕРЕКЛАССИФИЦИРОВАНО | Переклассифицировано в PT-003 (проектная задача), архитектурные принципы перенесены в SRS §2.4.1 с трассировкой из BRD | business-requirements.md; work-plan.md; technical-requirements.md
- BR-009 | BR | Обработка специализированных форматов (DWG/сметы) | ПЕРЕФОРМУЛИРОВАНО | Переформулировано как бизнес-требование к продукту: добавлены конкретные типы извлекаемых данных из DWG (слои, реквизиты, характеристики, штампы) и смет (структура, цены, нормативы, материалы), критерии приемки и трассировка | business-requirements.md; requirements_register.jsonl
- BR-014 | BR | Извлечение реквизитов из главного штампа (PDF/DWG) | Updated | Added traceability to UC-04, UC-05 and FR-STAMP-01..03, FR-DAT-02/-05 | business-requirements.md; requirements_register.jsonl
 - BR-015 | BR | Табличное содержание спецификаций (PDF/DWG) | Updated | Added specific table types, data validation (formulas, mandatory fields, totals), and traceability | business-requirements.md; requirements_register.jsonl
 - BR-016 | BR | Нормализация смет (ARP/GSFX/XML/XLS) | Updated | Defined Estimate model essence, added round‑trip format conversion for integrations, clarified validation rules, and traceability | business-requirements.md; requirements_register.jsonl
 - BR-017 | BR | Выжимки из нормативных документов (DOCX → PDF) | Updated | Added extract fields, PDF templates, validation of clause links and metadata, and traceability | business-requirements.md; requirements_register.jsonl
 - BR-018 | BR | Отчёты по шаблонам подразделений (XLSX) | Updated | Added template registry/versioning, header auto-fill, multi-sheet support, strict template conformance validation, and traceability | business-requirements.md; requirements_register.jsonl
 - BR-011 | BR → PT-004 | Анализ безопасности и соответствия | ПЕРЕКЛАССИФИЦИРОВАНО | Reclassified as project task PT‑004; added to work plan; product security requirements to SRS NFR‑SEC | business-requirements.md; work-plan.md
- FR-LEARN | FR | Обучение системы на документах | Updated | Added ACL (Teacher only), logging and versioning with rollback, validation criteria and quality report; linked to FR-DAT-03/-04 and FR-LOG-01/-02 | technical-requirements.md
- SRS | FR | Synchronization with BR updates | Updated | Added new FR sections: STAMP (01..03), TABLE (01..04), FORMULA (01..02), ESTIMATE (01..06), EXCEL-TPL (01..04), extended EXCEL (06..07) and NORMS (07..09); updated traceability table | technical-requirements.md; requirements_register.jsonl
- BR-014 | BR | Извлечение реквизитов из главного штампа | Updated | Added roles/ACL, errors/exceptions handling, maturity marker | business-requirements.md; requirements_register.jsonl
- BR-015 | BR | Табличное содержание спецификаций | Updated | Added roles/ACL, validation/reporting of inconsistencies, maturity marker | business-requirements.md; requirements_register.jsonl
- BR-016 | BR | Нормализация смет | Updated | Added roles/ACL, error handling and detailed validation, maturity marker | business-requirements.md; requirements_register.jsonl
- BR-017 | BR | Выжимки из нормативных документов | Updated | Added PDF template details, validation, roles/ACL, errors, maturity marker | business-requirements.md; requirements_register.jsonl
- BR-018 | BR | Отчёты по шаблонам подразделений | Updated | Added template registry/versioning, roles/ACL, error reporting, maturity marker | business-requirements.md; requirements_register.jsonl
- BRD | Glossary | Added | Added compact glossary (Title Block, Estimates, Specification, Template Version, Normative Extract) | business-requirements.md
- FR-QUERY-01 | FR | Прием текстовых запросов | Updated | Added ACL (User), filters (projectId/dateRange/docTypes), sanitize/length limits, requestId tracing | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-01 | FR | Загрузка проверенных и рабочих документов | Updated | Added multi-channel ingestion (UI/API/folder recursive), referenceDocument flag, interactive task selection and detailed instructions capture, metadata set (projectId/mime/sha256/sourcePath/uploaderId/uploadedAt/version), audit fields, unsupported/broken file error policy, traceability to UC-01 and links to FR-DAT/ACCESS/LOG | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-02 | FR | Анализ содержимого и извлечение знаний | Updated | Added mandatory artifacts list (fullText/titleBlock/tables/estimate/normativeLinks/outputs.xlsx/log), interactive low-confidence clarification loop, batch/parallel support and step restart, error codes policy, knowledge versioning and project linkage, tracing (ingestionId/requestId/projectId) | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-03 | FR | Сохранение знаний с версионированием/откатом | Updated | Defined knowledgeVersion model with provenance and diffs, atomic version commits per project, operations (create/list/get/rollback/markAsReference), statuses (Draft/Ready/Reference/Deprecated), audit/tracing links (ingestionId/requestId/uploaderId), ACL linkage | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-03 | FR | Структура хранилища знаний | Updated | Clarified structured storage layout: projectId → documentType → dataType (fullText/titleBlock/tables/estimate/normativeLinks/outputs) for deterministic paths and retrieval | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-04 | FR | Валидация качества и отчёт | Updated | Added acceptance: mandatory checks (duplicates/completeness/parse errors/low confidence), report formats (JSON+Markdown, optional XLSX), severity (Error/Warning) with blockPublish flag, full tracing to knowledgeVersion and artifacts | technical-requirements.md; requirements_register.jsonl
 - FR-LEARN-01 | FR | Пресеты прикладных задач | Updated | Added task presets by documentType/content (PDF/DWG/ARP-GSFX-XML-XLS/DOCX normative); presets expand to concrete tasks; teacher can modify; persisted for FR-LEARN-02 | technical-requirements.md; requirements_register.jsonl
 - FR-QUERY-01 | FR | Пресеты фильтров и Acceptance | Updated | Added filter presets (currentProject/myProjects/last7d/last30d/types), sanitize and 2000-char limit, request receipt fields (requestId/timestamp/userId/projectId/normalizedQuery/filters/presetsUsed), ACL/403 policy and logging | technical-requirements.md; requirements_register.jsonl
 - FR-QUERY-02 | FR | Контекст, сущности и trace | Updated | Added context sources (project dictionaries/synonyms/stop-words, metadata), minimal entity set (rdCipher, documentType[], tableType/specKind, dateRange; optional normCode), and explainability trace with acceptance | technical-requirements.md; requirements_register.jsonl
 - FR-QUERY-03 | FR | Поиск и ранжирование | Updated | Defined search flow (filters → semantic ranking), result fields (id/projectId/docType/path/score/snippet/artifactRefs), pagination (offset/limit), short-TTL cache by normalizedQuery+filters with requestId linkage | technical-requirements.md; requirements_register.jsonl
 - FR-QUERY-04 | FR | Формирование ответов и задачи | Updated | Added response types (list/detail/aggregate), JSON structure/meta/trace, Excel generation via templates, and proposal of relevant applied tasks with quick launch (linked to FR-LEARN-01 presets) | technical-requirements.md; requirements_register.jsonl
- FR-EXCEL-01 | FR | Создание структурированных отчетов в Excel | Updated | Added specialized report types based on live use cases: сводная спецификация (8 columns), унификация (20 columns), бюджетирование (27 columns), integration with price data and supplier contracts | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-PROJECT-01 | FR | Привязка всех данных к конкретным проектам | Updated | Added price information binding for budgeting and specification unification: price data structure (priceId/projectId/itemCode/itemName/unitPrice/currency/supplierId/contractId/priceDate/validityPeriod/priceSource), integration with budgeting reports | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-TABLE-01 | FR | Извлечение таблиц спецификаций | Updated | Added price data extraction for project budgeting: price fields (price/amount/currency/priceSource/priceDate), extraction algorithm for price fields, validation of extracted price data, integration with project context | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-EXCEL-08 | FR | Бюджетирование проектов с ценовой информацией | Added | New requirement for specialized financial reports: 27-column financial structure, price data integration, supplier contract integration, cost calculations by positions, aggregation by categories, total calculations | technical-requirements.md; fr-catalog.md; requirements_register.jsonl
- FR-LEARN-01 | FR | Загрузка проверенных и рабочих документов | Updated | Added specific system instructions for applied tasks based on live use cases: task 1.1 (8 columns), task 1.2 (20 columns), task 1.3 (27 columns), iterative document transformations | technical-requirements.md; requirements_register.jsonl
- FR-LEARN-02 | FR | Анализ содержимого и извлечение знаний | Updated | Added iterative transformation process: stage 1.1 (basic specification) → stage 1.2 (unification) → stage 1.3 (budgeting), intermediate results preservation, artifacts for next iteration | technical-requirements.md; requirements_register.jsonl
- FR-EXCEL-01 | FR | Создание структурированных отчетов в Excel | Updated | Added step-by-step algorithms for each report type: algorithm 1.1 (7 steps), algorithm 1.2 (7 steps), algorithm 1.3 (8 steps), iterative process validation | technical-requirements.md; requirements_register.jsonl
- UC-21.1 | UC | Создание сводной спецификации материалов и оборудования | Added | New use case for basic specification creation: PDF → stamp extraction → table recognition → data extraction → categorization → Excel with 8 columns | use-cases.md; requirements_register.jsonl
- UC-21.2 | UC | Унификация спецификации с проектной информацией | Added | New use case for specification unification: result UC-21.1 → project metadata → standardization → technical characteristics → Excel with 20 columns | use-cases.md; requirements_register.jsonl
- UC-21.3 | UC | Бюджетирование проекта с ценовой информацией | Added | New use case for project budgeting: result UC-21.2 → price integration → cost calculation → supplier contracts → financial analytics → Excel with 27 columns | use-cases.md; requirements_register.jsonl
- FR-ESTIMATE-01 | FR | Унифицированная модель данных для сметных документов | Added | New requirement for unified Estimate model: hierarchical structure (sections→items→resources), mandatory fields validation, data normalization, error handling with criticality levels, integration with BR-016 and UC-27..UC-32, UC-35 | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-TABLE-02 | FR | Сохранение структуры таблиц при извлечении данных | Added | New requirement for preserving complete table structure during data extraction: merged cells with ranges, data types (text/number/date/formula), totals with calculation methods, cell formatting (font/color/alignment/borders), header structure with nesting levels, table restoration in output formats with original structure, error handling with criticality levels | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-TABLE-03 | FR | Валидация обязательных полей таблиц | Added | New requirement for validating mandatory fields in extracted specification tables: field presence validation (critical errors for missing fields), data type validation (text for names, numbers for quantities/prices), value range validation (quantity > 0, prices ≥ 0), reference validation (units from system dictionary), error classification by criticality levels, detailed reporting with row/field specifications, correction recommendations | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-TABLE-04 | FR | Валидация согласованности итогов с обучаемостью системы пользователем | Added | New requirement for validating totals consistency with system learning capability: mathematical calculation validation (sums, section totals, overall totals), consistency validation (header totals match calculated values, cross-document consistency), formula validation (syntax, references, cycles), system learning (error knowledge accumulation, learning from user corrections, applying learned rules), integration with FR-LEARN-01..04 and FR-KNOW-01 for knowledge accumulation and validation algorithm adaptation | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-FORMULA-01 | FR | Детект и проверка применимых формул/расчетов в документах с обучаемостью системы | Added | New requirement for automatic formula detection and validation with system learning: formula types (mathematical operations, design-specific formulas, validation formulas), detection algorithms by format (PDF МЧ/scan, DWG, Excel), system learning (formula template accumulation, project-specific adaptation, interactive learning, validation rule formation), integration with learning system (formulas.json artifact, project dictionaries, knowledge versioning, project context), structured formula data with metadata, error handling with criticality levels | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-FORMULA-02 | FR | Отчет о расхождениях между рассчитанными и извлеченными итогами с обучаемостью системы пользователем | Added | New requirement for discrepancy reporting between calculated and extracted totals with system learning: discrepancy types (mathematical calculations, totals consistency, formula validation), system learning (discrepancy knowledge accumulation, learning from user corrections, applying learned rules, project history integration), comparison algorithm (extract totals, recalculate by formulas, compare with precision threshold, classify discrepancies, generate report), integration with learning system (formulaValidation.json artifact, validation rules accumulation, knowledge versioning, project context), detailed discrepancy report with location, error type, recommendations, criticality level | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-EXCEL-07 | FR | Автозаполнение полей заголовка из контекста проекта с обучаемостью системы | Updated | Enhanced requirement for intelligent header auto-fill with system learning: header fields (basic fields: projectName, designStage, rdCipher, reportDate, organization, responsible; additional fields: reportVersion, reportType, department, projectStatus, approvalDate), data sources (project metadata via FR-PROJECT-01, titleBlock via FR-OCR-05, user context, system settings), source priority (titleBlock → project metadata → user context → system settings), auto-fill algorithm (project context retrieval, titleBlock extraction with confidence, template filling via FR-EXCEL-TPL-01..04, validation, data synchronization), system learning (header template accumulation by document/project/department types, typical header structure memorization, project-specific adaptation, interactive learning, auto-fill rule formation), integration with learning system (headerTemplates.json artifact, project header dictionaries, knowledge versioning, project context application), intelligent capabilities (smart filling, contextual adaptation, predictive filling, header validation), comprehensive error handling with criticality levels | technical-requirements.md; fr-catalog.md; requirements_register.csv
- FR-EXCEL-TPL-01 | FR | Реестр шаблонов Excel отчетов с интеллектуальным управлением и обучаемостью | Updated | Enhanced requirement for intelligent template registry with system learning: template data model (templateId UUID, templateName, version semantic versioning major.minor.patch with buildId support, owner userId with department PTO/Estimate/General, approvalDate, scope PTO/Estimate/General/Project-specific, status Draft/Approved/Deprecated/Archived, templateStructure sheets/columns/formulas/styles, learningMetadata), learning system integration (automatic template structure analysis, usage pattern extraction data types/formulas/styles, template effectiveness statistics accumulation by projects, knowledge base creation about department-specific template characteristics), intelligent version management (automatic versioning suggestions based on changes, conflict detection between department versions, merge suggestions preserving department specificity, FR-LEARN-03 integration for template knowledge versioning), project adaptation (learning on template usage in specific projects, template modification suggestions based on project data analysis, project-specific template version creation, FR-KNOW-01 integration for template knowledge portability), management algorithms (automatic structure recognition sheet analysis/column structure extraction/data type recognition/formula dependency recognition/style classification, intelligent versioning semantic versioning with change criticality consideration/automatic version suggestions based on change analysis/compatibility impact tracking/learning system integration for versioning algorithm improvement, conflict management conflict detection between versions/conflict resolution strategy suggestions/department specificity preservation during merging/learning from user decisions for algorithm improvement), error learning (learning on template validation errors, typical problem knowledge accumulation and solutions, automatic correction suggestions based on accumulated experience, FR-LEARN-04 integration for template knowledge quality validation), comprehensive acceptance criteria and traceability to BR-018, UC-05, UC-15, FR-EXCEL-01..08, FR-EXCEL-TPL-02..04, FR-LEARN-01..04, FR-KNOW-01, FR-DAT-02, FR-ACCESS-01..02, FR-LOG-01..02 | technical-requirements.md; requirements_register.csv
- FR-EXCEL-TPL-03 | FR | Валидация типов данных и форматов; принуждение обязательных полей с интеллектуальным обучением и адаптацией | Updated | Enhanced requirement for intelligent data type and format validation with system learning: data types for validation (numeric: integers, decimals with 2 decimal places, percentages, monetary amounts; text: strings, dates in DD.MM.YYYY format, material/equipment codes; logical: yes/no, enabled/disabled; formulas: mathematical operations, cell references, Excel functions; project-specific: RD ciphers in AAA-BBB-CCC format, design stages, units of measurement per GOST), data formats (compliance with specified formats: numbers with thousands separators, dates in standard format, percentages with % symbol, monetary amounts with currency; project-specific formats: RD ciphers, material codes per corporate standards, units of measurement per GOST reference), mandatory fields (validation of all mandatory fields per template FR-EXCEL-TPL-01, value correctness validation against project standards, value range validation: quantities > 0, prices ≥ 0, percentages 0-100%, unit of measurement compliance with project reference), learning system integration (automatic validation result analysis for typical error statistics accumulation, learning from user corrections for validation algorithm improvement, knowledge base creation about validation specifics for different departments PTO vs Estimate Department, automatic correction suggestions based on accumulated experience, validation rule adaptation to specific project requirements), template registry integration FR-EXCEL-TPL-01 (validation against active template version data type rules from registry, validation rule migration support during template version updates, intelligent version management integration, validation result storage in template learningMetadata), validation compliance integration FR-EXCEL-TPL-02 (data type validation coordination with structural validation, joint non-compliance report generation, error criticality level integration), validation algorithms (structural type validation: cell data type analysis, comparison with expected types per template, format compliance checking; semantic validation: logical data correctness checking, business rule compliance per project, validation against project standards; contextual validation: project context consideration, specific project requirements, project historical data; intelligent validation: learned rule application, department-specific adaptation, improvement suggestions), mandatory field enforcement (automatic detection of unfilled mandatory fields, auto-fill suggestions based on project context FR-PROJECT-01, data format hints, save blocking for critical errors, interactive dialogs for ambiguous data clarification), error handling with criticality levels (Critical: blocks further processing - missing mandatory fields, critical data type errors, project standard violations; Warning: requires attention - format non-compliance, data type warnings, standard deviations; Info: informational - improvement recommendations, data type usage statistics, optimization suggestions), comprehensive result: detailed data type validation report with all found deviations, correction recommendations, automatic corrections where possible, validation statistics, data type validation rule improvement suggestions, comprehensive acceptance criteria covering all validation aspects, performance requirements ≤3sec for files up to 5MB, parallel validation support, scalability with template growth | technical-requirements.md; requirements_register.csv
- FR-LEARN-02 | FR | Обработка документов и извлечение знаний | Updated | Перевели требование в компактный формат, оставили pipeline, артефакты и три Acceptance про формирование, уточнения и логирование | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-LEARN-03 | FR | Версионирование знаний | Updated | Сжали описание, зафиксировали операции create/list/get/rollback/markReference и связи с артефактами | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-LEARN-04 | FR | Контроль качества знаний | Updated | Уточнили проверки, форматы отчета и флаг blockPublish в компактном описании | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-OCR-01B | FR | OCR сканированных PDF | Updated | Сократили описание, задали метрики CER/WER, логирование шагов и выпуск tables/text JSON | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-OCR-02 | FR | Улучшенная обработка сложных сканов | Updated | Упорядочили возможности по улучшению качества, штампам и рукописи, добавили количественные Acceptance | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-07 | FR | Автозаполнение заголовков Excel | Updated | Сформировали компактный блок с источниками данных, SLA 5 сек и правилами confidence | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-08 | FR | Бюджетирование проектов | Updated | Сократили описание, оставили ключевые шаги и Acceptance по точности расчетов и фиксации источников | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-TPL-01 | FR | Реестр шаблонов Excel | Updated | Переписали требование в компактном формате, акцент на CRUD, аудите и рекомендациях | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-TPL-02 | FR | Проверка соответствия шаблону | Updated | Сжали до ключевых проверок структуры, отчетности и синхронизации правил | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-TPL-03 | FR | Контроль типов данных | Updated | Оставили три основные проверки и Acceptance по fixSuggestions и справочникам | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-EXCEL-TPL-04 | FR | Комплексный отчет о соответствии | Updated | Сконцентрировали описание на агрегации результатов, метриках времени и экспорте | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-TABLE-02 | FR | Сохранение структуры таблиц | Updated | Укоротили описание, выделили сохранение merged и реконструкцию XLSX | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-TABLE-03 | FR | Валидация обязательных полей таблиц | Updated | Компактно перечислили проверки, отчет и фиксацию версий справочника | technical-requirements.md; requirements_register.csv; fr-catalog.md
- FR-TABLE-04 | FR | Валидация согласованности итогов | Updated | Сфокусировались на пересчете сумм, точности ≥95% и синхронизации с формулами | technical-requirements.md; requirements_register.csv; fr-catalog.md
