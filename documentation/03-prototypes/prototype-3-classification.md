# Прототип 3: Тематическая классификация и проектно-ориентированная работа

**Цель**: Оценка качества тематической классификации документов и данных, а также реализация проектно-ориентированной работы с поиском аналогов  
**Статус**: В разработке  
**Приоритет**: Высокий  

---

## Описание

Прототип автоматически категоризирует документы по тематикам с использованием NLP-моделей и машинного обучения, а также обеспечивает проектно-ориентированную работу с данными, включая поиск аналогов по проектам.

### Связь с пользовательскими сценариями (UC)
- UC-03: Проектно-ориентированная работа (привязка и фильтрация по проектам)
- UC-11: Поиск аналогов по проектам (vector search/semantic search)
- UC-06/UC-16: Работа с нормативной базой (кросс‑ссылки и валидация в разрезе тематик)

### Входные данные
- Текстовое содержимое документов
- Метаданные документов с проектной привязкой
- Примеры классификации
- Контекстная информация
- Данные о проектах (подстанция, козырек и т.д.)
- Запросы на поиск аналогов

### Выходные данные
- Тематические категории
- Уровень уверенности
- Ключевые слова/фразы
- Рекомендации по маршрутизации
- Проектная классификация документов
- Результаты поиска аналогов по проектам
- Excel отчеты с аналогичными проектами

---

## План реализации

### Этап 1: Подготовка данных (2 дня)
- [ ] Сбор образцов документов по категориям
- [ ] Предобработка текстов
- [ ] Создание обучающей выборки
- [ ] Анализ специфики домена
- [ ] Подготовка проектных данных

### Этап 2: Модели классификации (4 дня)
- [ ] Обучение baseline-модели (TF-IDF + SVM)
- [ ] Тестирование предобученных моделей (BERT, RoBERTa)
- [ ] Fine-tuning на корпоративных данных
- [ ] Сравнение подходов

### Этап 3: Проектно-ориентированная работа (4 дня)
- [ ] Реализация проектной классификации документов
- [ ] Разработка алгоритмов поиска аналогов
- [ ] Создание системы сравнения проектов
- [ ] Интеграция с базой знаний

### Этап 4: Оценка качества (2 дня)
- [ ] Метрики precision/recall/F1-score
- [ ] Cross-validation
- [ ] Тестирование на новых документах
- [ ] Анализ ошибок
- [ ] Тестирование поиска аналогов

### Этап 5: Интеграция (2 дня)
- [ ] API для классификации
- [ ] API для поиска аналогов
- [ ] Batch-обработка документов
- [ ] Логирование результатов
- [ ] Мониторинг качества

---

## Критерии успеха

- **Точность классификации**: ≥90% (F1-score)
- **Время обработки**: ≤5 сек на документ
- **Поддержка категорий**: 10-20 основных тем
- **Возможность обучения**: добавление новых категорий
- **Точность проектной классификации**: ≥85%
- **Качество поиска аналогов**: ≥80% релевантных результатов
- **Время поиска аналогов**: ≤3 сек

---

## Технический стек

- **ML Framework**: scikit-learn, transformers
- **NLP**: spaCy, NLTK, BERT
- **Векторизация**: TF-IDF, Word2Vec, BERT embeddings
- **Поиск**: Elasticsearch, FAISS для поиска аналогов
- **База данных**: PostgreSQL для проектных данных
- **Excel**: openpyxl для отчетов
- **Язык**: Python 3.11+
- **Контейнеризация**: Docker

---

## Категории документов

### Основные темы (предварительно)
- Техническая документация
- Финансовые документы
- Договоры и соглашения
- Отчеты и аналитика
- Чертежи и схемы
- Сметы и расчеты
- Переписка
- Нормативные документы

### Проектные категории
- **Подстанция беговая** - все документы по проекту подстанции
- **Козырек** - документы по проекту козырька
- **Здания** - архитектурно-строительная документация
- **Инфраструктура** - инженерные системы
- **Другие проекты** - прочие проекты заказчика

---

## Метрики качества

- **Precision**: Доля правильно классифицированных документов
- **Recall**: Доля найденных документов категории
- **F1-score**: Гармоническое среднее precision и recall
- **Confusion Matrix**: Детальный анализ ошибок
- **Проектная точность**: Доля правильно привязанных к проектам документов
- **Качество аналогов**: Релевантность найденных аналогичных проектов
- **Время поиска**: Скорость выполнения поиска аналогов

---

## Риски

- Недостаток обучающих данных
- Специфика корпоративной терминологии
- Изменение тематик со временем
- Производительность больших моделей
- Сложность определения проектных границ
- Неоднозначность критериев поиска аналогов
 - Качество проектной классификации

---

## Demo Script (без метрик)
1. Импорт нормализованных данных из P1/P2 (документы, метаданные, таблицы, сметы).
2. Классификация документов по тематикам и проектам; показ проектной привязки.
3. Поиск аналогов (UC‑11): запрос → построение векторного запроса → выдача проектов.
4. Пересечения с нормативной базой: показ кросс‑ссылок в разрезе тематик/проектов.
5. Экспорт результатов поиска аналогов в XLSX.

## Acceptance Checklist (без метрик)
- [ ] Документы классифицированы по темам и проектам, привязка видна в интерфейсе/логах.
- [ ] Поиск аналогов возвращает релевантные проекты с краткой структурой данных.
- [ ] Кросс‑ссылки на нормативку отображаются (номер/название/дата).
- [ ] Экспорт результатов поиска аналогов в XLSX доступен.

---

## Sample data pack (для демонстрации)
- Нормализованные данные из P1/P2 (метаданные, таблицы, Estimate JSON, XLS отчёты).
- Тестовые запросы для UC‑11 (поиск аналогов).

Связанные UC: UC‑03, UC‑11, UC‑06/UC‑16.
